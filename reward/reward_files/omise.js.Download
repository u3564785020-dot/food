/*!
   * OmiseJs v2.14.0
   * Copyright: Omise
   *
   * Date: 2025-09-03T13:54:46.924Z
   */(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},193:t=>{t.exports={vaultUrl:"https://vault.omise.co",cardHost:"https://cdn.omise.co",interfaceUrl:"https://api.omise.co"}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(t,e,r){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=f(t,e,r);if("normal"===u.type){if(n=r.done?d:p,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",m={};function y(){}function g(){}function v(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,E=w&&w(w(S([])));E&&E!==r&&n.call(E,i)&&(b=E);var O=v.prototype=y.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function A(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=O.constructor=v,v.constructor=g,g.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},k(T.prototype),T.prototype[a]=function(){return this},t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(O),u(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:S(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},481:(t,e,r)=>{!function(t){"use strict";t.exports.is_uri=r,t.exports.is_http_uri=n,t.exports.is_https_uri=o,t.exports.is_web_uri=i,t.exports.isUri=r,t.exports.isHttpUri=n,t.exports.isHttpsUri=o,t.exports.isWebUri=i;var e=function(t){return t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function r(t){if(t&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)&&!/%[^0-9a-f]/i.test(t)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t)){var r,n,o,i,a,s="",u="";if(s=(r=e(t))[1],n=r[2],o=r[3],i=r[4],a=r[5],s&&s.length&&o.length>=0){if(n&&n.length){if(0!==o.length&&!/^\//.test(o))return}else if(/^\/\//.test(o))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(s.toLowerCase()))return u+=s+":",n&&n.length&&(u+="//"+n),u+=o,i&&i.length&&(u+="?"+i),a&&a.length&&(u+="#"+a),u}}}function n(t,n){if(r(t)){var o,i,a,s,u="",c="",f="",l="";if(u=(o=e(t))[1],c=o[2],i=o[3],a=o[4],s=o[5],u){if(n){if("https"!=u.toLowerCase())return}else if("http"!=u.toLowerCase())return;if(c)return/:(\d+)$/.test(c)&&(f=c.match(/:(\d+)$/)[0],c=c.replace(/:\d+$/,"")),l+=u+":",l+="//"+c,f&&(l+=f),l+=i,a&&a.length&&(l+="?"+a),s&&s.length&&(l+="#"+s),l}}}function o(t){return n(t,!0)}function i(t){return n(t)||o(t)}}(t=r.nmd(t))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=r(193),e=r.n(t);function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}var a=r(481),s="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==s&&s,u="URLSearchParams"in s,c="Symbol"in s&&"iterator"in Symbol,f="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(t){return!1}}(),l="FormData"in s,p="ArrayBuffer"in s;if(p)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(t){return t&&h.indexOf(Object.prototype.toString.call(t))>-1};function m(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function y(t){return"string"!=typeof t&&(t=String(t)),t}function g(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c&&(e[Symbol.iterator]=function(){return e}),e}function v(t){this.map={},t instanceof v?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function b(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function w(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function E(t){var e=new FileReader,r=w(e);return e.readAsArrayBuffer(t),r}function O(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:f&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:l&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:u&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():p&&f&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=O(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):p&&(ArrayBuffer.prototype.isPrototypeOf(t)||d(t))?this._bodyArrayBuffer=O(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var t=b(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=b(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(E)}),this.text=function(){var t,e,r,n=b(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=w(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}v.prototype.append=function(t,e){t=m(t),e=y(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},v.prototype.delete=function(t){delete this.map[m(t)]},v.prototype.get=function(t){return t=m(t),this.has(t)?this.map[t]:null},v.prototype.has=function(t){return this.map.hasOwnProperty(m(t))},v.prototype.set=function(t,e){this.map[m(t)]=y(e)},v.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},v.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),g(t)},v.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),g(t)},v.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),g(t)},c&&(v.prototype[Symbol.iterator]=v.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(e=e||{}).body;if(t instanceof A){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new v(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new v(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),T.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new v(e.headers),this.url=e.url||"",this._initBody(t)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})},k.call(A.prototype),k.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var C=[301,302,303,307,308];x.redirect=function(t,e){if(-1===C.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})};var S=s.DOMException;try{new S}catch(t){(S=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),S.prototype.constructor=S}function L(t,e){return new Promise((function(r,n){var o=new A(t,e);if(o.signal&&o.signal.aborted)return n(new S("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var t,e,n={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",e=new v,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in i?i.responseURL:n.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;setTimeout((function(){r(new x(o,n))}),0)},i.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},i.onabort=function(){setTimeout((function(){n(new S("Aborted","AbortError"))}),0)},i.open(o.method,function(t){try{return""===t&&s.location.href?s.location.href:t}catch(e){return t}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(f?i.responseType="blob":p&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof v?o.headers.forEach((function(t,e){i.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){i.setRequestHeader(t,y(e.headers[t]))})),o.signal&&(o.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",a)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}function j(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}L.polyfill=!0,s.fetch||(s.fetch=L,s.Headers=v,s.Request=A,s.Response=x);var B=r(757),F=r.n(B),P=function(){return i((function t(){n(this,t)}),[{key:"post",value:(t=F().mark((function t(e){var r,n,o,i,a,s=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:null,n=s.length>2&&void 0!==s[2]?s[2]:{},o=n.headers,t.next=5,fetch(e,{method:"post",headers:o,body:JSON.stringify(r)});case 5:return i=t.sent,t.next=8,this._getResponseContent(i);case 8:return a=t.sent,t.abrupt("return",{status:i.status,data:a});case 10:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,s,"next",t)}function s(t){j(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t){return e.apply(this,arguments)})},{key:"_getResponseContent",value:function(t){var e=t.headers.get("content-type");return null!=e&&e.includes("text/")?t.text():t.json()}}]);var t,e}();const I="2.14.0";var U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[t,"OmiseJS/".concat(I)].join(" ").trim()},R=function(){return i((function t(e){n(this,t);var r=function(t){var e={error:!1,message:""};t.vaultUrl&&(0,a.isUri)(t.vaultUrl)?t.cardHost&&(0,a.isUri)(t.cardHost)?t.interfaceUrl&&(0,a.isUri)(t.interfaceUrl)||(e.message="Missing interfaceUrl"):e.message="Missing cardHost":e.message="Missing vaultUrl";return e.error=""!==e.message,e}(e);if(r.error)throw new Error(r.message);this.config=e,this.publicKey=null,this.userAgent=null,this.httpClient=new P}),[{key:"setPublicKey",value:function(t){return this.publicKey=t,this.publicKey}},{key:"setUserAgent",value:function(t){this.userAgent=t}},{key:"createSource",value:function(t,e,r){e.type=t;var n=this._omiseRequestHeaders();this.httpClient.post("".concat(this.config.interfaceUrl,"/sources/"),e,{headers:n}).then((function(t){var e=t.status,n=t.data;r(e,n)})).catch((function(t){r(0,{code:"create_source_error",error:t.message})}))}},{key:"createToken",value:function(t,e,r){var n=this.config.vaultUrl,o={};o[t]=e;var i=this._omiseRequestHeaders();this.httpClient.post("".concat(n,"/tokens"),o,{headers:i}).then((function(t){var e=t.status,n=t.data;r(e,n)})).catch((function(t){r(0,{code:"connection_error",message:t.message})}))}},{key:"_omiseRequestHeaders",value:function(){return{"Content-Type":"application/json",Accept:"application/json",Authorization:(t=this.publicKey,e=btoa("".concat(t,":")),"Basic ".concat(e)),"X-User-Agent":U(this.userAgent)};var t,e}}])}();function D(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function H(t,e){return Object.assign({},t,e)}function M(t){try{return JSON.parse(t)}catch(e){return t}}function q(t){for(var e={},r=t.attributes.length,n=0;n<r;n++){var o=t.attributes[n];if(/^data/.test(o.name))e[o.name.replace("data-","").replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))]=o.value}return e}var G="CLOSE_IFRAME",K="SHOW_IFRAME_APP_FORM",$="CLOSE_AND_SEND_TOKEN",z="CLOSE_AND_SEND_TOKEN_SOURCE",J="SEND_ERROR",W="REQUEST_CARD_TOKEN",V="SEND_TOKEN",X="SEND_TOKEN_AND_SOURCE";function Y(t){r.g.addEventListener("message",(function(e){var r=M(e.data),n=r.type,o=r.data;!function(t,e,r){switch(e){case G:t.close();break;case J:t.sendError(r);break;case $:t.close(),t.setTokenAtOmiseTokenField(r);break;case z:t.close(),t.setTokenAndSourceAtOmiseTokenField(r.token,r.source);break;case V:t.setTokenAtOmiseTokenField(r,!1);break;case X:t.setTokenAndSourceAtOmiseTokenField(r.token,r.source,!1)}}(t,n,o)}),!1)}function Q(t,r){tt(t,K,r,e().cardHost)}function Z(t,e){tt(t,W,e,"*")}function tt(t,e,r,n){var o=[];var i=JSON.stringify({type:e,data:r},(function(t,e){if("terms"===t)return e;if("object"===N(e)&&null!==e){if(-1!==o.indexOf(e))return;o.push(e)}return e}));t.postMessage(i,n)}function et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?et(Object(r),!0).forEach((function(e){D(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var nt={key:"",amount:0,currency:"THB",image:"https://cdn.omise.co/assets/frontend-images/store-logo.svg",frameLabel:"Omise",defaultPaymentMethod:"credit_card",otherPaymentMethods:[],frameDescription:"Secured by Omise",submitLabel:"Pay",buttonLabel:"Pay with Omise",location:"no",submitAuto:"yes",submitFormTarget:"",cardBrands:"visa mastercard",locale:"en",autoCardNumberFormat:"yes",expiryDateStyle:"",hideAmount:"false",showEmailField:!1,saveCardRequired:!1,style:{body:{width:"400px"},merchantSection:{visible:!0},methodsListSection:{maxHeight:"unset",scrollY:!1},closeButton:{visible:!0},submitButton:{backgroundColor:"#1A56F0",textColor:"#FFF"},link:{textColor:"#1A56F0"}}},ot=["width: 100%","height: 100%","border: none"],it=["display: none","visibility: visible","position: fixed","left: 0px","top: 0px","width: 100%","height: 100%","z-index: 2147483647","padding: 0","margin: 0","border: 0 none transparent","background-color: rgba(0, 0, 0, 0)","overflow-x: hidden","overflow-y: auto","-webkit-tap-highlight-color: transparent","transition: background-color .2s"],at=function(){},st=function(){return i((function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(this,t),this.settings=e,this.setup(e),r&&this.init()}),[{key:"setup",value:function(t){return this.app={settings:rt({},t),iframe:null,iframeLoaded:!1,omiseScriptTag:null,omiseGenerateCheckoutButton:null,iframeAppId:"omise-checkout-iframe-app",defaultConfig:rt({},nt),configForIframeOnLoad:rt({},nt),currentOpenConfig:{},formElement:null,allConfigureButtons:[]},this.app}},{key:"init",value:function(){for(var t=null!=this.app.iframe,e=document.getElementsByTagName("script"),r=e.length,n=0;n<r;n++){var o=e[n];if(o.hasAttribute("data-key")&&o.hasAttribute("data-amount")){this.app.omiseScriptTag=o;break}}t||this.isInsideIframeApp()||!this.app.omiseScriptTag||(this.createIframe(),this.app.omiseGenerateCheckoutButton=this.createOmiseCheckoutButton(),Y(this))}},{key:"getDefaultConfig",value:function(){return this.app.defaultConfig}},{key:"getAllConfigureButtons",value:function(){return this.app.allConfigureButtons}},{key:"sendError",value:function(t){(rt(rt({},this.app.defaultConfig),this.app.currentOpenConfig).onError||at)(t)}},{key:"setTokenAtOmiseTokenField",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=rt(rt({},this.app.defaultConfig),this.app.currentOpenConfig),n=r.submitAuto,o=r.onCreateTokenSuccess,i=r.onCreateSuccess;this.app.formElement&&(this.isOmiseSource(t)?this.app.formElement.omiseSource.value=t:this.app.formElement.omiseToken.value=t),"yes"===n&&this.app.formElement&&this.app.formElement.submit();var a=o||at,s=i||at;o&&i?this.processCallback(s,t):o&&!i?a(t):i&&!o&&this.processCallback(s,t),e&&(this.app.currentOpenConfig={})}},{key:"processCallback",value:function(t,e){if("string"==typeof e)t({token:this.isOmiseSource(e)?void 0:e,source:this.isOmiseSource(e)?e:void 0});else{if(!e.id)throw new Error("Token object must have id property");t({token:this.isOmiseSource(e.id)?void 0:e,source:this.isOmiseSource(e.id)?e:void 0})}}},{key:"setTokenAndSourceAtOmiseTokenField",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=rt(rt({},this.app.defaultConfig),this.app.currentOpenConfig),o=n.submitAuto,i=n.onCreateSuccess;this.app.formElement&&(this.app.formElement.omiseToken.value=t,this.app.formElement.omiseSource.value=e),"yes"===o&&this.app.formElement&&this.app.formElement.submit();var a=i||at;a({token:t,source:e}),r&&(this.app.currentOpenConfig={})}},{key:"isOmiseSource",value:function(t){return/^src_/.test(t)}},{key:"getFormByTarget",value:function(t){for(var e=t;e&&"FORM"!==e.tagName;)e=e.parentNode;return e}},{key:"createIframe",value:function(){var t,e=this,r=document.createElement("iframe");r.id=this.app.iframeAppId,r.src="".concat(this.app.settings.cardHost,"/pay.html");var n=this.app.defaultConfig.customCardForm||this.app.defaultConfig.customInstallmentForm?ot:it;return r.setAttribute("style",n.join("; ")),r.setAttribute("sandbox","allow-forms allow-scripts allow-popups allow-same-origin"),r.setAttribute("allow","payment"),(null!==(t=this.app.defaultConfig.element)&&void 0!==t?t:document.body).appendChild(r),r.onload=function(){"block"===e.app.iframe.style.display&&Q(r.contentWindow,{config:e.app.configForIframeOnLoad}),e.app.iframeLoaded=!0;var t=new CustomEvent("iframeLoaded");window.dispatchEvent(t)},this.app.iframe=r,this.app.iframe}},{key:"createHiddenInputForOmiseToken",value:function(t){var e=null;if(t&&"FORM"===t.tagName&&(e=t),!e)throw new Error(["Missing form element. Generate button or custom button must contain in form element.","https://github.com/omise/omise.js-example/blob/master/example-4-custom-integration-multiple-buttons.html","Or setting submit form target","https://github.com/omise/omise.js-example/blob/master/example-5-custom-integration-specify-checkout-form.html"].join("\n"));var r=e.querySelector('input[name="omiseToken"]');null==r&&((r=document.createElement("input")).setAttribute("type","hidden"),r.setAttribute("name","omiseToken"),e.appendChild(r));var n=e.querySelector('input[name="omiseSource"]');return null==n&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","omiseSource"),e.appendChild(n)),r}},{key:"createOmiseCheckoutButton",value:function(){var t=this,e=this.prepareConfig(q(this.app.omiseScriptTag)),r=document.createElement("button");r.className="omise-checkout-button",r.innerHTML=e.buttonLabel;var n=this.app.omiseScriptTag;if(n){var o=this.getFormByTarget(n);this.app.formElement=o,this.createHiddenInputForOmiseToken(o)}else console.warn("Missing Omise script tag");return r.addEventListener("click",(function(e){if(e.preventDefault(),n){var r=q(n),o=t.prepareConfig(r);t.app.configForIframeOnLoad=rt({},o),t.open(o)}else console.warn("Missing Omise script tag")}),!1),n.parentNode.insertBefore(r,n.nextSibling),r}},{key:"isInsideIframeApp",value:function(){return null!=document.getElementById(this.app.iframeAppId)}},{key:"prepareConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.otherPaymentMethods;return e&&"string"==typeof e&&(t.otherPaymentMethods=this.stringToArray(e)),H(this.app.defaultConfig,ut(t))}},{key:"stringToArray",value:function(t){return t.match(/[\w_]+(\([^)]+\))?/g)||[]}},{key:"configure",value:function(t){var e;return!(null!==(e=t.element)&&void 0!==e?e:document.body).innerHTML&&this.app.iframe&&this.destroy(),this.app.defaultConfig=this.prepareConfig(t),t.iframeAppId&&(this.app.iframeAppId=t.iframeAppId),this.isInsideIframeApp()||this.app.iframe||(this.createIframe(),Y(this)),this.app.defaultConfig}},{key:"open",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at;if(!this.app.iframe)return!1;var n=!1,o=function(){var o=t.prepareConfig(e);t.app.currentOpenConfig=rt({},o),t.app.iframe.style.backgroundColor=t.app.defaultConfig.customCardForm||t.app.defaultConfig.customInstallmentForm?"transparent":"rgba(0, 0, 0, .4)",t.app.iframe.style.display="block",setTimeout((function(){Q(t.app.iframe.contentWindow,{config:o}),r(t.app.iframe),n=!0}))};return this.app.iframeLoaded?o():window.addEventListener("iframeLoaded",(function(){n||o()})),!0}},{key:"requestCardToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z(this.app.iframe.contentWindow,{billingAddress:t})}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return!!this.app.iframe&&(this.app.iframe.style.backgroundColor="rgba(0, 0, 0, 0)",setTimeout((function(){t.app.iframe.style.display="none",e(t.app.iframe),(t.app.currentOpenConfig.onFormClosed||at)(t.app.iframe)}),250),!0)}},{key:"destroy",value:function(){var t=document.getElementById(this.app.iframeAppId);if(this.app.iframe&&t){var e,r=document.getElementById(this.app.iframeAppId);(null!==(e=this.app.defaultConfig.element)&&void 0!==e?e:document.body).removeChild(r)}this.setup(this.settings)}},{key:"createParentFrameHandler",value:function(){return{closeIframe:function(){tt(parent.window,G,null,"*")},closeAndSendToken:function(t){!function(t){tt(parent.window,$,t,"*")}(t)},closeAndSendTokenSource:function(t){!function(t){tt(parent.window,z,t,"*")}(t)},sendError:function(t){!function(t){tt(parent.window,J,t,"*")}(t)},sendToken:function(t){!function(t){tt(parent.window,V,t,"*")}(t)},sendTokenAndSource:function(t){!function(t){tt(parent.window,X,t,"*")}(t)}}}},{key:"configureButton",value:function(t,e){var r={buttonId:t,configuration:this.prepareConfig(e)};return this.app.allConfigureButtons.push(r),r}},{key:"attach",value:function(){var t=this,e=[];return this.app.allConfigureButtons.forEach((function(r){var n=r.configuration,o=document.querySelector(r.buttonId),i=t.app.defaultConfig.buttonLabel;n.buttonLabel&&i!==n.buttonLabel?i=n.buttonLabel:o.innerHTML&&(i=o.innerHTML),o.innerHTML=i;var a=t.app.defaultConfig.submitFormTarget,s=a?document.querySelector(a):t.getFormByTarget(o);t.createHiddenInputForOmiseToken(s),o.addEventListener("click",(function(e){e.preventDefault();e.target;t.app.configForIframeOnLoad=n,t.app.formElement=s,t.open(n)}),!1),e.push(o)})),this.isInsideIframeApp()||this.app.iframe||(this.createIframe(),Y(this)),e}}])}();function ut(t){var e={},r={publicKey:"key",logo:"image",locationField:"location"};for(var n in t){var o=r[n];o?e[o]=t[n]:e[n]=t[n]}return e}r.g.Omise=new R(e()),r.g.OmiseCard=new st(e())})()})();